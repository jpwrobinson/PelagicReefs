(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[7911],{53481:(e,t,r)=>{"use strict";var n=r(96540),a=r(40961),c=r(23029),o=r(92901),i=r(56822),l=r(53954),u=r(85501),s=r(64467),d=r(5556),f=r(98871),m=r(53196),p=r(55359),v=r(76217),h=r(1489),E=r(28085),g=r(58156),A=r.n(g);function b(e){var t=A()(e,"metadata.History"),r=[];return t.forEach((function(e){A()(e,"LinkProvider").forEach((function(e){r.includes(e.Name)||r.push(e.Name)}))})),r.join(", ")}function y(e){var t=A()(e,"metadata.Source.Creator"),r="";return t&&(r=t[0].Name,2===t.length?r="".concat(r," & ").concat(t[1].Name):t.length>2&&(r="".concat(r," et al."))),r}function I(e){var t=A()(e,"metadata.Source.Identifier"),r=null,n=null;return t&&t.forEach((function(e){e.IDURL&&(n=e.IDURL,"doi"===e.IDScheme&&(r=e.IDURL))})),r||n}function P(e){var t=A()(e,"metadata.Source.Identifier"),r=null;return t&&t.forEach((function(e){e.ID&&"doi"===e.IDScheme&&(r=e.ID)})),r}function D(e){var t=A()(e,"metadata.Source.Identifier"),r=A()(e,"metadata.Source.Title");return r&&0!==r.length||t&&t.forEach((function(e){e.IDURL&&(r="".concat(e.IDScheme.toUpperCase(),": ").concat(e.ID),"doi"===e.IDScheme&&(r="DOI: ".concat(e.ID)))})),r}function S(e){var t={literature:"file alternate",dataset:"table",software:"code",unknown:"asterisk"};return t[A()(e,"metadata.Source.Type.Name")]||t.unknown}function x(e){var t=A()(e,"metadata.Source.Identifier"),r=[],n=[];return t&&t.forEach((function(e){e.IDURL&&!r.includes(e.IDScheme)&&(n.push(e),r.push(e.IDScheme))})),n}function R(e){var t=new Date(e.metadata.Source.PublicationDate);return!isNaN(t.getFullYear())&&t.getFullYear()}var N=r(53959),C=r(27041),O=r(93682),j=r(92516),w=r.n(j),k=function(e){var t,r=e.citation,a="Citation provided by ".concat(r.providerNames);return n.createElement(N.A.Row,null,n.createElement(N.A.Cell,null,n.createElement(v.A,{name:r.icon,size:"large"})),n.createElement(N.A.Cell,null,n.createElement(C.A,{size:"tiny"},n.createElement("a",{href:r.doiUrl,target:"_blank",rel:"noreferrer"},w()(r.title,{length:80})),n.createElement(C.A.Subheader,{className:"mt-5"},r.creatorNames," ",r.doi&&"(DOI: ".concat(r.doi,")")))),n.createElement(N.A.Cell,null,r.publicationYear),n.createElement(N.A.Cell,{collapsing:!0},null===(t=r.badges)||void 0===t?void 0:t.map((function(e){return n.createElement(O.A,{inverted:!0,size:"mini",content:e.ID,key:e.ID,trigger:n.createElement("a",{href:e.IDURL,target:"_blank","aria-label":"".concat(e.IDScheme,": ").concat(e.ID),rel:"noreferrer"},n.createElement(E.A,{size:"tiny",className:"primary uppercase mr-5"},e.IDScheme))})}))),n.createElement(N.A.Cell,{collapsing:!0},n.createElement(O.A,{inverted:!0,size:"mini",content:a,trigger:n.createElement(v.A,{role:"note",name:"question circle","aria-label":a})})))};k.propTypes={citation:d.PropTypes.object.isRequired};var T=(0,f.Q2)((function(e){var t=e.currentResultsState;return n.createElement(N.A,{striped:!0,className:"citations"},n.createElement(N.A.Body,null,null===t||void 0===t?void 0:t.data.hits.map((function(e){return n.createElement(k,{citation:(t=e,{badges:x(t),title:D(t),creatorNames:y(t),providerNames:b(t),doiUrl:I(t),doi:P(t),icon:S(t),publicationYear:R(t)}),key:e.metadata.ID});var t}))))}));T.propTypes={currentResultsState:d.PropTypes.object},T.defaultProps={currentResultsState:null};var z=r(27859),q=r(50363);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,s.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=(0,f.Q2)((function(e){var t,r=e.currentResultsState,a=e.updateQueryState,c=e.currentQueryState,o=e.recordPID,i=e.recordParentPID,l=function(e){var t=["literature","dataset","software","unknown"];return e&&e.forEach((function(e){t.splice(t.indexOf(e.key),1)})),t}(null===(t=r.data.aggregations)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.buckets);return n.createElement(h.A,null,n.createElement(h.A.Column,{mobile:"16",tablet:"4",computer:"3"},n.createElement(C.A,{size:"tiny"},n.createElement("b",null,"Show only:"))),n.createElement(h.A.Column,{mobile:"16",tablet:"12",computer:"13"},n.createElement(z.A,{horizontal:!0,className:"filter-list"},n.createElement(f.zG,{agg:{field:"type",aggName:"type"}}),l.map((function(e){return n.createElement(z.A.Item,{key:e},n.createElement(q.A,{label:"".concat(e," (0)"),disabled:!0,id:"".concat(e,"-facet-checkbox")}))})),n.createElement(z.A.Item,null,n.createElement(q.A,{label:"Citations to this version",onChange:function(e,t){var r=t.checked,n="group_by",l=r?"identity":"version",u=r?o:i,s=c.filters.map((function(e){return e[0]===n?[n,l]:"id"===e[0]?["id",u]:e}));a(U(U({},c),{},{filters:s}))},id:"citations-to-version"})))))}));B.propTypes={currentResultsState:d.PropTypes.object,updateQueryState:d.PropTypes.func,currentQueryState:d.PropTypes.object,recordPID:d.PropTypes.object.isRequired,recordParentPID:d.PropTypes.object.isRequired},B.defaultProps={currentResultsState:null,updateQueryState:null,currentQueryState:null};var _=r(87395),L=function(e){var t=e.totalResults;return n.createElement(E.A,{size:"small",circular:!0,className:"neutral"},t)};L.propTypes={totalResults:d.PropTypes.string.isRequired};function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}var Y="citationsSearch",H=[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30}],J=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},"".concat(Y,".BucketAggregation.element"),(function(e){return e.containerCmp})),"".concat(Y,".BucketAggregationContainer.element"),(function(e){return e.valuesCmp})),"".concat(Y,".EmptyResults.element"),(function(){return n.createElement("p",{className:"rel-pl-1 rel-pr-1"},n.createElement("i",null,"No citations found"))})),"".concat(Y,".Error.element"),(function(){return n.createElement(_.A,{error:!0,as:"p",className:"rel-ml-1 rel-mr-1"},"Oops! Something went wrong while fetching results.")})),"".concat(Y,".Count.element"),L),K=function(e){function t(e){var r,n,a,o;return(0,c.A)(this,t),n=this,a=t,o=[e],a=(0,l.A)(a),r=(0,i.A)(n,F()?Reflect.construct(a,o||[],(0,l.A)(n).constructor):a.apply(n,o)),(0,s.A)(r,"initialState",(function(e){return{sortBy:"mostrecent",sortOrder:"asc",layout:"list",page:1,size:10,filters:[["group_by","version"],["id",e],["relation","isCitedBy"],["scheme","doi"]]}})),(0,s.A)(r,"searchApi",(function(){var e=function(e){return{axios:{url:e,timeout:5e3,headers:{Accept:"application/json"}}}}(r.props.endpoint);return new f.HZ(e)})),(0,s.A)(r,"handleAccordion",(function(){var e=r.state.active;r.setState({active:!e})})),r.state={active:!0},r}return(0,u.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.state.active,t=this.props,r=t.recordPIDs,a=t.recordParentPIDs,c=A()(r,"doi.identifier"),o=A()(a,"doi.identifier");return n.createElement(m.OverridableContext.Provider,{value:J},n.createElement(f.gz,{appName:Y,searchApi:this.searchApi(),initialQueryState:this.initialState(o),urlHandlerApi:{enabled:!1}},n.createElement(p.A,{className:"panel"},n.createElement(p.A.Title,{active:e,onClick:this.handleAccordion,className:"panel-heading"},"Citations",n.createElement("a",{href:"https://support.zenodo.org/help/en-gb/25-citations",target:"_blank",className:"ml-5 mr-5",rel:"noreferrer","aria-label":"Citations help page"},n.createElement(v.A,{name:"question circle",className:"button"})),n.createElement(f.y_,null),n.createElement(v.A,{name:"angle right"})),n.createElement(p.A.Content,{active:e},n.createElement(h.A,{padded:!0},n.createElement(h.A.Row,null,n.createElement(h.A.Column,{width:"10"},n.createElement(B,{recordPID:c,recordParentPID:o})),n.createElement(h.A.Column,{width:"6"},n.createElement(E.A,{as:"label",content:"Search citations",htmlFor:"citations-search-bar",className:"hidden"}),n.createElement(f.IW,{uiProps:{name:"citations-search",id:"citations-search-bar"},placeholder:"Search for citation ..."})))),n.createElement(h.A,{className:"mt-0"},n.createElement(h.A.Row,{className:"pt-0"},n.createElement(h.A.Column,null,n.createElement(f.oK,null,n.createElement(T,null),n.createElement(f.$D,null),n.createElement(f.i6,null))))),n.createElement(h.A,{padded:!0},n.createElement(h.A.Row,null,n.createElement(h.A.Column,{computer:"13",tablet:"10",mobile:"16",textAlign:"center",className:"pr-0"},n.createElement(f.dK,{options:{size:"mini",showEllipsis:!0}})),n.createElement(h.A.Column,{computer:"3",tablet:"6",mobile:"16",textAlign:"right",className:"pl-0"},n.createElement(f.RZ,{values:H,label:function(e){return n.createElement(n.Fragment,null,"Page size: ",e)}}))))))))}}])}(n.Component);K.propTypes={recordPIDs:d.PropTypes.object.isRequired,recordParentPIDs:d.PropTypes.object.isRequired,endpoint:d.PropTypes.string.isRequired};var Z=document.getElementById("citations-search"),$=Z.dataset.recordPids,G=Z.dataset.recordParentPids,W=Z.dataset.citationsEndpoint;Z&&a.render(n.createElement(K,{recordPIDs:JSON.parse($),recordParentPIDs:JSON.parse(G),endpoint:W}),Z)},99811:(e,t,r)=>{var n=r(47237)("length");e.exports=n},61074:e=>{e.exports=function(e){return e.split("")}},81437:(e,t,r)=>{var n=r(72552),a=r(40346);e.exports=function(e){return a(e)&&"[object RegExp]"==n(e)}},28754:(e,t,r)=>{var n=r(25160);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},49698:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},81993:(e,t,r)=>{var n=r(99811),a=r(49698),c=r(77927);e.exports=function(e){return a(e)?c(e):n(e)}},63912:(e,t,r)=>{var n=r(61074),a=r(49698),c=r(42054);e.exports=function(e){return a(e)?c(e):n(e)}},77927:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",c="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+a+")"+"?",u="[\\ufe0e\\ufe0f]?",s=u+l+("(?:\\u200d(?:"+[c,o,i].join("|")+")"+u+l+")*"),d="(?:"+[c+n+"?",n,o,i,r].join("|")+")",f=RegExp(a+"(?="+a+")|"+d+s,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},42054:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",c="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+a+")"+"?",u="[\\ufe0e\\ufe0f]?",s=u+l+("(?:\\u200d(?:"+[c,o,i].join("|")+")"+u+l+")*"),d="(?:"+[c+n+"?",n,o,i,r].join("|")+")",f=RegExp(a+"(?="+a+")|"+d+s,"g");e.exports=function(e){return e.match(f)||[]}},69607:(e,t,r)=>{var n=r(81437),a=r(27301),c=r(86009),o=c&&c.isRegExp,i=o?a(o):n;e.exports=i},17400:(e,t,r)=>{var n=r(99374),a=1/0;e.exports=function(e){return e?(e=n(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},61489:(e,t,r)=>{var n=r(17400);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}},92516:(e,t,r)=>{var n=r(77556),a=r(28754),c=r(49698),o=r(23805),i=r(69607),l=r(81993),u=r(63912),s=r(61489),d=r(13222),f=/\w*$/;e.exports=function(e,t){var r=30,m="...";if(o(t)){var p="separator"in t?t.separator:p;r="length"in t?s(t.length):r,m="omission"in t?n(t.omission):m}var v=(e=d(e)).length;if(c(e)){var h=u(e);v=h.length}if(r>=v)return e;var E=r-l(m);if(E<1)return m;var g=h?a(h,0,E).join(""):e.slice(0,E);if(void 0===p)return g+m;if(h&&(E+=g.length-E),i(p)){if(e.slice(E).search(p)){var A,b=g;for(p.global||(p=RegExp(p.source,d(f.exec(p))+"g")),p.lastIndex=0;A=p.exec(b);)var y=A.index;g=g.slice(0,void 0===y?E:y)}}else if(e.indexOf(n(p),E)!=E){var I=g.lastIndexOf(p);I>-1&&(g=g.slice(0,I))}return g+m}},42634:()=>{}},e=>{e.O(0,[3378,6506,5373,8871],(()=>{return t=53481,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=zenodo-rdm-citations.c20ea4f4ccb963a0648e.js.map